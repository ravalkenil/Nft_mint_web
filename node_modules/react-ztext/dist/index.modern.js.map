{"version":3,"file":"index.modern.js","sources":["../src/Layer.tsx","../src/Layers.tsx","../src/index.tsx"],"sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\n\ninterface Props {\n  index: number\n  transform: string\n  opacity: number\n  children: React.ReactNode\n  style?: React.CSSProperties\n}\n\nconst Layer = React.memo(({ index, opacity, transform, children }: Props) => {\n  return (\n    <StyledLayer\n      style={{\n        //@ts-expect-error\n        '--transform': transform,\n        '--opacity': opacity,\n        ...(index >= 1 && backLayersStyle)\n      }}\n    >\n      {children}\n    </StyledLayer>\n  )\n})\n\nconst backLayersStyle: React.CSSProperties = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  pointerEvents: 'none',\n  MozUserSelect: 'none',\n  msUserSelect: 'none',\n  WebkitUserSelect: 'none',\n  userSelect: 'none'\n}\n\nconst StyledLayer = styled.span`\n  display: inline-block;\n  opacity: var(--opacity);\n  transform: var(--transform);\n`\n\nexport default Layer\n","import React, { Fragment, useMemo } from 'react'\nimport Layer from './Layer'\n\ninterface Props {\n  layers: number\n  fade: boolean\n  children: React.ReactNode\n  direction: string\n  depth: string\n}\n\nconst Layers = React.memo(\n  ({ layers, fade, children, direction, depth }: Props) => {\n    const depthUnit = depth.match(/[a-z]+/)?.[0] ?? ''\n\n    const getDirection = React.useCallback(\n      (pct: number) => {\n        const depthNumeral = parseFloat(depth.replace(depthUnit, ''))\n        if (direction === 'backwards') {\n          return -pct * depthNumeral\n        }\n        if (direction === 'both') {\n          return -(pct * depthNumeral) + depthNumeral / 2\n        }\n        if (direction === 'forwards') {\n          return -(pct * depthNumeral) + depthNumeral\n        }\n        return null\n      },\n      [depthUnit]\n    )\n\n    const renderLayers = useMemo(\n      () =>\n        Array(layers)\n          .fill(0)\n          .map((_, i) => {\n            const pct = i / layers\n            const transform = `translateZ(${getDirection(pct)}${depthUnit})`\n            const opacity = fade ? (1 - pct) / 2 : 1\n            return (\n              <Layer key={i} index={i} opacity={opacity} transform={transform}>\n                {children}\n              </Layer>\n            )\n          }),\n      []\n    )\n    return <Fragment>{renderLayers}</Fragment>\n  }\n)\nexport default Layers\n","import React from 'react'\nimport styled from 'styled-components'\nimport Layers from './Layers'\n\ninterface Props {\n  depth: string\n  direction: string\n  event: string\n  eventRotation: string\n  eventDirection: string\n  fade: boolean\n  layers: number\n  perspective: string\n  children: React.ReactNode\n  style?: React.CSSProperties\n}\n\nconst Ztext: React.FC<Props> = (props) => {\n  const layersWrapperRef = React.useRef<HTMLSpanElement>(null)\n\n  const tilt = React.useCallback(\n    (xPct: number, yPct: number) => {\n      const eventRotationUnit = props.eventRotation?.match(/[a-z]+/)?.[0] ?? ''\n      const eventRotationNumeral = parseFloat(\n        props.eventRotation.replace(eventRotationUnit, '')\n      )\n      // Switch neg/pos values if eventDirection is reversed\n      let eventDirectionAdj = null\n      if (props.eventDirection === 'reverse') {\n        eventDirectionAdj = -1\n      } else {\n        eventDirectionAdj = 1\n      }\n\n      // Multiply pct rotation by eventRotation and eventDirection\n      const xTilt = xPct * eventRotationNumeral * eventDirectionAdj\n      const yTilt = -yPct * eventRotationNumeral * eventDirectionAdj\n\n      // Rotate .z-layers as a function of x and y coordinates\n      const transform = `rotateX(${yTilt}${eventRotationUnit}) rotateY(${xTilt}${eventRotationUnit})`\n\n      layersWrapperRef.current?.style.setProperty('--transform', transform)\n    },\n    [props.eventDirection]\n  )\n\n  React.useEffect(() => {\n    if (props.event === 'pointer') {\n      window.addEventListener(\n        'mousemove',\n        (e) => {\n          const xPct = (e.clientX / window.innerWidth - 0.5) * 2\n          const yPct = (e.clientY / window.innerHeight - 0.5) * 2\n\n          tilt(xPct, yPct)\n        },\n        false\n      )\n\n      window.addEventListener(\n        'touchmove',\n        (e) => {\n          const xPct = (e.touches[0].clientX / window.innerWidth - 0.5) * 2\n          const yPct = (e.touches[0].clientY / window.innerHeight - 0.5) * 2\n\n          tilt(xPct, yPct)\n        },\n        false\n      )\n    }\n  }, [props.event])\n\n  return (\n    <Wrapper\n      style={{\n        //@ts-expect-error\n        '--perspective': props.perspective,\n        ...props.style\n      }}\n    >\n      <LayersWrapper ref={layersWrapperRef}>\n        <Layers\n          layers={props.layers}\n          direction={props.direction}\n          depth={props.depth}\n          fade={props.fade}\n        >\n          {props.children}\n        </Layers>\n      </LayersWrapper>\n    </Wrapper>\n  )\n}\n\nZtext.defaultProps = {\n  depth: '1rem',\n  direction: 'both',\n  event: 'pointer',\n  eventRotation: '30deg',\n  eventDirection: 'default',\n  fade: false,\n  layers: 10,\n  perspective: '500px'\n}\n\nconst Wrapper = styled.div`\n  display: inline-block;\n  position: relative;\n  perspective: var(--perspective);\n`\n\nconst LayersWrapper = styled.span`\n  display: inline-block;\n  transform-style: preserve-3d;\n  transform: var(--transform);\n`\n\nexport default Ztext\n"],"names":["Layer","React","memo","index","opacity","transform","children","StyledLayer","style","backLayersStyle","position","top","left","pointerEvents","MozUserSelect","msUserSelect","WebkitUserSelect","userSelect","styled","span","Layers","layers","fade","direction","depth","depthUnit","match","getDirection","useCallback","pct","depthNumeral","parseFloat","replace","renderLayers","useMemo","Array","fill","map","_","i","key","Fragment","Ztext","props","layersWrapperRef","useRef","tilt","xPct","yPct","eventRotationUnit","eventRotation","eventRotationNumeral","eventDirectionAdj","eventDirection","xTilt","yTilt","current","setProperty","useEffect","event","window","addEventListener","e","clientX","innerWidth","clientY","innerHeight","touches","Wrapper","perspective","LayersWrapper","ref","defaultProps","div"],"mappings":"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"}